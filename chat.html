<!-- HTML -->
<section class="whatsapp-section">
    <div class="container">
        <div class="left-panel">
            <div class="header">
                <div class="search-bar">
                    <input type="text" placeholder="Search services...">
                </div>
            </div>
            <div class="services-list" id="servicesList"></div>
        </div>
        
        <div class="right-panel">
            <div class="chat-header" id="chatHeader">
                <div class="profile-info">
                    <img class="service-avatar" src="" alt="Service Avatar">
                    <div class="service-meta">
                        <h2 class="service-name"></h2>
                        <p class="service-status">Typically replies within 1 hour</p>
                    </div>
                </div>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="encryption-notice">
                    <div class="lock-icon">ðŸ”’</div>
                    <p>Messages are end-to-end encrypted</p>
                </div>
            </div>
            
        </div>
    </div>
</section>

<style>
/* CSS */
:root {
    --primary-color: #25D366;
    --secondary-color: #667781;
    --background-light: #f0f2f5;
    --message-user: #DCF8C6;
    --message-service: #FFFFFF;
}

.whatsapp-section {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    max-width: 1200px;
    margin: 2rem auto;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.1);
    overflow: hidden;
}

.container {
    display: flex;
    height: 75vh;
    background: var(--background-light);
}

/* Left Panel */
.left-panel {
    width: 30%;
    background: var(--sidebar-bg); /* Updated sidebar background */
    border-right: 1px solid rgba(0,0,0,0.08);
}


.search-bar input {
    width: 100%;
    padding: 12px 20px;
    border: none;
    background: var(--background-light);
    border-radius: 8px;
    margin: 10px;
    font-size: 0.9em;
}

.service-item {
    display: flex;
    align-items: center;
    padding: 12px 16px;
    cursor: pointer;
    transition: background 0.2s ease;
    border-bottom: 1px solid rgba(0,0,0,0.05);
}

.service-item:hover {
    background: rgba(0,0,0,0.03);
}

.service-item.active {
    background: rgba(0,0,0,0.05);
}

.service-avatar {
    width: 49px;
    height: 49px;
    border-radius: 50%;
    margin-right: 15px;
    object-fit: cover;
    border: 2px solid rgba(0,0,0,0.05);
}

.service-meta {
    flex: 1;
}

.service-meta strong {
    font-weight: 500;
    color: #111b21;
    font-size: 1em;
    display: block;
    margin-bottom: 2px;
}

.service-meta div {
    font-size: 0.875em;
    color: var(--secondary-color);
    line-height: 1.4;
}

/* Right Panel */
.chat-header {
    background: #f0f2f5;
    padding: 14px 20px;
    border-bottom: 1px solid rgba(0,0,0,0.08);
    display: flex;
    align-items: center;
}

.profile-info {
    display: flex;
    align-items: center;
}

.service-name {
    font-weight: 500;
    font-size: 1.1em;
    margin: 0;
    color: #111b21;
}

.service-status {
    font-size: 0.8em;
    color: var(--secondary-color);
    margin: 2px 0 0;
}

.chat-messages {
    background: 
        linear-gradient(rgba(255,255,255,0.9), rgba(255,255,255,0.9)),
        var(--chat-bg-image);
    background-size: cover;
    background-position: center;
}

.message {
    max-width: 65%;
    margin: 12px 0;
    padding: 8px 12px;
    border-radius: 8px;
    position: relative;
    opacity: 0;
    animation: fadeIn 0.3s forwards;
    font-size: 0.95em;
    line-height: 1.4;
    box-shadow: 0 1px 2px rgba(0,0,0,0.08); width: 65%;
    min-width: 200px;
    max-width: 500px;
    word-wrap: break-word;
    white-space: pre-wrap;
    
}

.message.service {
    background: var(--message-service);
    margin-right: auto;
    border-top-left-radius: 2px;
}

.message.user {
    background: var(--message-user);
    margin-left: auto;
    border-top-right-radius: 2px;
}

.timestamp {
    font-size: 0.75em;
    color: var(--secondary-color);
    text-align: right;
    margin-top: 4px;
}

.encryption-notice {
    text-align: center;
    padding: 20px 0;
    color: var(--secondary-color);
    font-size: 0.8em;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

@media (max-width: 768px) {
    .container {
        height: 90vh;
    }
    
    .service-avatar {
        width: 40px;
        height: 40px;
    }
    
    .chat-messages {
        padding: 15px 4%;
    }
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}



/* Message input field */
.chat-input {
    padding: 15px 20px;
    background: #ffffff;
    border-top: 1px solid #e9edef;
    display: flex;
    gap: 10px;
    align-items: center;
}

.input-wrapper {
    flex: 1;
    background: #f0f2f5;
    border-radius: 8px;
    padding: 9px 12px;
}

.chat-input textarea {
    width: 100%;
    border: none;
    background: transparent;
    resize: none;
    font-family: inherit;
    font-size: 0.95em;
    padding: 4px 0;
}

.chat-input button {
    background: var(--primary-color);
    border: none;
    color: white;
    padding: 8px 15px;
    border-radius: 6px;
    cursor: pointer;
}

/* Adjust chat messages height */
.chat-messages {
    height: calc(100% - 160px);
}
</style>

<script>
// Updated JavaScript with images
const services = {
    "web-dev": {
        name: "Web Development",
        image: "web-dev-avatar.jpg",
        lastMessage: "Let's discuss your project requirements",
        timestamp: "2/19/2025",
        messages: [
            { type: "service", text: "Hi! Ready to build your dream website?", time: "10:00" },
            { type: "user", text: "Yes, what's included in your packages?", time: "10:01" },
            { type: "service", text: "We offer full-stack development with modern frameworks...", time: "10:02" }
        ]
    },
    "seo": {
        name: "SEO Optimization",
        image: "seo-avatar.jpg",
        lastMessage: "Boost your search rankings",
        timestamp: "2/18/2025",
        messages: [
            { type: "service", text: "Let's improve your website visibility!", time: "09:00" },
            { type: "service", text: "Our SEO packages start at $299/mo", time: "09:00" }
        ]
    }
};

function initServices() {
    const list = document.getElementById('servicesList');
    Object.keys(services).forEach(key => {
        const service = document.createElement('div');
        service.className = 'service-item';
        service.innerHTML = `
            <img class="service-avatar" src="${services[key].image}" alt="${services[key].name}">
            <div class="service-meta">
                <strong>${services[key].name}</strong>
                <div>${services[key].lastMessage}</div>
                <div class="timestamp">${services[key].timestamp}</div>
            </div>
        `;
        service.addEventListener('click', () => loadService(key));
        list.appendChild(service);
    });
}

function loadService(serviceKey) {
    const service = services[serviceKey];
    const chatHeader = document.getElementById('chatHeader');
    const chatMessages = document.getElementById('chatMessages');
    
    // Update header
    chatHeader.querySelector('.service-avatar').src = service.image;
    chatHeader.querySelector('.service-name').textContent = service.name;
    
    // Clear messages
    chatMessages.innerHTML = '<div class="encryption-notice"><div class="lock-icon">ðŸ”’</div><p>Messages are end-to-end encrypted</p></div>';
    
    // Add messages
    service.messages.forEach(msg => {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${msg.type}`;
        messageDiv.innerHTML = `
            <div>${msg.text}</div>
            <div class="timestamp">${msg.time}</div>
        `;
        chatMessages.appendChild(messageDiv);
    });
    
    // Auto-scroll to bottom
    chatMessages.scrollTop = chatMessages.scrollHeight;
    
    // Set active state
    document.querySelectorAll('.service-item').forEach(item => 
        item.classList.remove('active'));
    event.currentTarget.classList.add('active');
}

document.addEventListener('DOMContentLoaded', initServices);
</script>